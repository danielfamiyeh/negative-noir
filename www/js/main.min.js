!function(){function e(){return interstitial.on("load",function(){m=!0}),interstitial.on("dismiss",function(){m=!1}),m}function t(e){return Math.floor(Math.random()*e)}function i(e,t){return e.x+e.width>t.x&&e.x<t.x+t.width&&e.y+e.height>t.y&&e.y<t.y+t.height?!0:void 0}function o(e){var t=e/984,i=W*t;return(0|i)+"px lato"}function l(e){touchX=e.targetTouches[0].clientX,touchY=e.targetTouches[0].clientY,console.log(touchX),console.log(touchY),("start"==Y||"dead"==Y)&&touchX>356&&touchY>40&&touchX<646&&touchY<120&&(v.isLoggedIn()?v.logout():v.login()),"start"===Y&&(touchX>W/8.41025641&&touchY>_/2.52456647&&touchX<W-W/1.75&&touchY<_/1.65592417&&(Y="help"),touchX>W/1.80882353&&touchY>_/2.54664726&&touchX<W/1.11818182&&touchY<_/1.59981685&&(v.isLoggedIn()?v.showLeaderboard(function(e){e&&console.error("showLeaderbord error: "+e.message)}):alert("Must be signed into "+u)),touchX>W/8&&touchY>_/1.36912226&&touchX<W/1.03114187&&touchY<_/1.28834808&&(v.isLoggedIn()?v.showAchievements(function(e){e&&console.error("showLeaderbord error: "+e.message)}):alert("Must be signed into "+u),console.log("achievements"))),"start"==Y||"dead"==Y?touchX>W/2.48484848&&touchX<W/1.62376238&&touchY>_/1.153125&&touchY<_/1.10810811&&("#000000"==k?k="#ffffff":"#ffffff"==k&&(k="#000000",K.play())):"help"===Y&&touchX>W/2/1.394&&touchX<W/2/.748&&touchY>_/2+_/2/2.09975962&&touchY<_/2/.617&&(S=[],oe.bullets=[],Y="play"),"play"==Y||"help"==Y?touchX>oe.rect.x&&touchX<oe.rect.x+oe.rect.width&&touchY>oe.rect.y&&touchY<oe.rect.y+oe.rect.height?("#000000"==k&&(K.currentTime=0,K.play()),oe.switchColour()):(b=new ee,directionX=touchX-oe.x,directionY=touchY-oe.y,magnitude=Math.sqrt(directionY*directionY+directionX*directionX),b.velX=directionX/magnitude*(W*_/49115.6571),b.velY=directionY/magnitude*(W*_/49115.6571),"#000000"==k&&(Z.currentTime=0,Z.play()),oe.bullets.push(b)):"dead"===Y&&(touchX>W/8.41025641&&touchY>_/2.52456647&&touchX<W-W/1.75&&touchY<_/1.65592417&&(N=0,Y="play"),touchX>W/8&&touchY>_/1.36912226&&touchX<W/1.03114187&&touchY<_/1.28834808&&(v.isLoggedIn()?v.showAchievements(function(e){e&&console.error("showLeaderbord error: "+e.message)}):alert("Must be signed into "+u),console.log("achievements")),touchX>W/1.80882353&&touchY>_/2.54664726&&touchX<W/1.11818182&&touchY<_/1.59981685&&(v.isLoggedIn()?v.showLeaderboard(function(e){e&&console.error("showLeaderbord error: "+e.message)}):alert("Must be signed into "+u),console.log("leaderboard")))}function s(){}function r(){newEnemy=new se(le[spawnPointNum].x,le[spawnPointNum].y,W/15.375,W/15.375),newEnemy.state=colourList[colour],newEnemy.isActive=!0,newEnemy.spawnPoint=spawnPointNum;for(var e=0;e<S.length;e++)i(newEnemy,S[e])&&(newEnemy.isActive=!1);S.push(newEnemy)}function n(){I.clearRect(0,0,W,_),I.fillStyle=L[F],I.fillRect(0,0,W,_);for(var e=0;e<ie.length;e++)ie[e].render(I);if("help"===Y){I.fillStyle="#000000",I.font=o(56),I.textAlign="center",I.textBaseline="middle",I.fillText("tap the screen to shoot.",W/2,_/13.765),I.fillText("tap yourself to change colour.",W/2,_/9.495),I.fillText("black bullets hit small black boxes.",W/2,_/7.279),I.fillText("white bullets hit small white boxes.",W/2,_/5.902),I.fillText("switch colours to hit them all.",W/2,_/4.963),I.fillText("there is a penalty for colour mismatch.",W/2,_/4.263),I.fillText("tap play to begin.",W/2,_/2.963),I.font=o(128),I.fillText("play",W/2,_/2+_/2/2.09975962),oe.isActive&&oe.render(I);for(var e=0;e<S.length;e++)S[e].isActive&&S[e].render(I);for(var e=0;e<oe.bullets.length;e++)oe.bullets[e].isActive&&oe.bullets[e].render(I)}if("start"===Y&&(I.font=o(124),I.fillStyle="#000000",I.textAlign="center",I.textBaseline="middle",I.strokeStyle="black",I.beginPath(),I.moveTo(W/8,_/2.5),I.lineTo(W-W/1.75,_/2),I.lineTo(W/8,_/1.625),I.lineTo(W/8,_/2.5),I.fillStyle="rgba(0,0,0,0.8)",I.fill(),I.fillRect(W-W/3,_/1.625,W/9.84,-(_/4.6462766)),I.fillRect(W-W/3-W/8.94545455,_/1.625,W/9.84,-(_/6.28417266)),I.fillRect(W-W/3+W/8.94545455,_/1.625,W/9.84,-(_/9.29255319)),I.fillStyle="#000000",I.font=o(168),I.fillText("negative",W/2-W/2/3.375,_/4.9),I.fillStyle="#FFFFFF",I.fillText("noir",W/2+W/2/1.74285714,_/4.9),I.fillStyle=k,I.font=o(96),I.fillText("mute",W/2,_/-11.808+_/1.06329884),I.fillStyle="#000000",I.font=o(96),I.fillText("achievements",W/2,_/1.34384615)),"play"===Y){I.fillRect(0,0,W,_),oe.isActive&&oe.render(I);for(var e=0;e<S.length;e++)S[e].isActive&&S[e].render(I);for(var e=0;e<oe.bullets.length;e++)oe.bullets[e].isActive&&oe.bullets[e].render(I);I.font=o(96),I.fillStyle=N%2===0?"#000000":"#FFFFFF",H=N.toString(),y="score: ",y+=N,I.fillText(N,W-W/2,_/21.8375)}"dead"===Y&&(I.font=o(64),I.fillStyle="black",w="you got: ",w+=N,w+=".",I.fillText(w,W/2,_/6.69348659),N>x&&(I.fillText("Congratulations!",W/2,_/4.58530184),I.font=o(64),I.fillText("You beat your high score.",W/2,_/3.86504425)),I.font=o(64),w="your high score is: ",w+=q,w+=".",I.fillText(w,W/2,_/10.91874),I.strokeStyle="black",I.beginPath(),I.moveTo(W/8,_/2.5),I.lineTo(W-W/1.75,_/2),I.lineTo(W/8,_/1.625),I.lineTo(W/8,_/2.5),I.fillStyle="rgba(0,0,0,0.8)",I.fill(),I.fillRect(W-W/3,_/1.625,W/9.84,-(_/4.6462766)),I.fillRect(W-W/3-W/8.94545455,_/1.625,W/9.84,-(_/6.28417266)),I.fillRect(W-W/3+W/8.94545455,_/1.625,W/9.84,-(_/9.29255319)),I.font=o(96),I.fillStyle=k,I.fillText("mute",W/2,_/-11.808+_/1.06329884),I.fillStyle="#000000",I.font=o(128),I.fillText("achievements",W/2,_/1.34384615),I.font=o(96))}function a(){if(d=navigator.onLine?"online":"offline",ie.length<20){var o=t(_/16),l=t(W),s=t(_);ie.push(new te(l,s,o,Math.random(),Math.random()))}for(var n=0;n<ie.length;n++)ie[n].update();if("dead"==Y&&(oe.isActive=!1,S=[],oe.bullets=[],T||"#000000"!=k||(U.currentTime=0,U.play(),T=!0)),"help"===Y){if(N=0,M=0,oe.isActive=!0,oe.update(),S.length<1){colour=t(2),colourList=["white","black"];var a=W/4;newEnemy=new se(a,_/2,W/15.375,W/15.375),newEnemy.state=colourList[colour],newEnemy.isActive=!0,S.push(newEnemy)}for(var n=0;n<S.length;n++)S[n].isActive?S[n].update():S.splice(n,1);for(var n=0;n<oe.bullets.length;n++)for(var c=0;c<S.length;c++)S[c].isActive&&i(oe.bullets[n].rect,S[c])&&oe.bullets[n].isActive&&S[c].isActive&&(oe.bullets[n].colour!=S[c].colour?("#000000"==k&&($.currentTime=0,$.play()),oe.bullets[n].isActive=!1):oe.bullets[n].colour==S[c].colour&&("#000000"==k&&(V.currentTime=0,V.play()),oe.bullets[n].isActive=!1,S[c].isActive=!1))}if("play"===Y&&(oe.isActive=!0,5==M&&(z>920?(z-=2.5,M=0):(z-=5,M=0)),shouldSpawn=t(1e3),shouldSpawn>=z)){switch(z){case 985:P=11;break;case 980:P=13;break;case 975:P=15;break;case 970:P=17;break;case 965:P=20;break;case 960:P=23;break;case 955:P=26;break;case 950:P=29;break;case 955:P=31;break;case 950:P=35;break;case 945:P=40;break;case 940:P=45;break;case 935:P=50;break;case 930:P=55;break;case 925:P=60;break;case 920:P=64}800>=z&&(P=2*P),colour=t(2),spawnPointNum=t(4),colourList=["white","black"],X=!1,S.length<P&&r()}if(oe.isActive&&oe.update(),"play"==Y||"help"==Y)for(var n=0;n<oe.bullets.length;n++)oe.bullets[n].isActive?oe.bullets[n].update():oe.bullets.splice(n,1),(oe.bullets[n].x<0||oe.bullets[n].x>W||oe.bullets[n].y<0||oe.bullets[n].y>_)&&oe.bullets.splice(n,1);for(var n=0;n<S.length;n++)S[n].isActive?S[n].update():S.splice(n,1);for(var n=0;n<oe.bullets.length;n++)for(var c=0;c<S.length;c++)S[c].isActive&&i(oe.bullets[n].rect,S[c])&&oe.bullets[n].isActive&&S[c].isActive&&(oe.bullets[n].colour!=S[c].colour?("#000000"==k&&($.currentTime=0,$.play()),N-=N>0?1:0,oe.bullets[n].isActive=!1):oe.bullets[n].colour==S[c].colour&&(M+=1,N+=1,N%20==0&&N!=C&&(C=N,F<L.length-1?F++:F=0),"#000000"==k&&(V.currentTime=0,V.play()),oe.bullets[n].isActive=!1,S[c].isActive=!1));for(var n=0;n<S.length;n++)if(i(oe.rect,S[n])){Y="dead",z=985,M=0,x=q,N>=50&&!O&&(v.submitAchievement("CgkImrjO8Y8JEAIQAg",function(e){e&&console.error("showLeaderbord error: "+e.message)}),localStorage.setItem("first",!0)),N>=100&&!Q&&(v.submitAchievement("CgkImrjO8Y8JEAIQAw",function(e){e&&console.error("showLeaderbord error: "+e.message)}),localStorage.setItem("second",!0)),N>=150&&!R&&(v.submitAchievement("CgkImrjO8Y8JEAIQBA",function(e){e&&console.error("showLeaderbord error: "+e.message)}),localStorage.setItem("third",!0)),N>=200&&!B&&(v.submitAchievement("CgkImrjO8Y8JEAIQBQ",function(e){e&&console.error("showLeaderbord error: "+e.message)}),localStorage.setItem("fourth",!0)),N>=300&&!j&&(v.submitAchievement("CgkImrjO8Y8JEAIQBg",function(e){e&&console.error("showLeaderbord error: "+e.message)}),localStorage.setItem("fifth",!0)),N>=500&&!J&&(v.submitAchievement("CgkImrjO8Y8JEAIQBw",function(e){e&&console.error("showLeaderbord error: "+e.message)}),localStorage.setItem("sixth",!0)),N>=750&&!G&&(v.submitAchievement("CgkImrjO8Y8JEAIQCA",function(e){e&&console.error("showLeaderbord error: "+e.message)}),localStorage.setItem("seventh",!0)),N>=1e3&&!D&&(v.submitAchievement("CgkImrjO8Y8JEAIQCQ",function(e){e&&console.error("showLeaderbord error: "+e.message)}),localStorage.setItem("eighth",!0)),interstitial.load();var h=e();h&&interstitial.show()}"dead"==Y&&N>q&&(q=parseInt(N),localStorage.setItem("hardHighScore",q),v.submitScore(q,function(e){e&&console.error("submitScore error: "+e.message)},{leaderboardID:"CgkImrjO8Y8JEAIQAA"}))}function c(){window.requestAnimationFrame(c),re=Date.now(),ne=re-ce,ne>he&&(n(),ce=re-ne%he),a()}function h(){f=Cocoon.Ad.AdMob,f.configure({ios:{banner:"ca-app-pub-1975599370935900/8913107473",interstitial:"ca-app-pub-1975599370935900/1389840670"},android:{banner:"ca-app-pub-1975599370935900/4482907877",interstitial:"ca-app-pub-1975599370935900/5959641072"}}),g=f.createBanner(),g.setLayout("BOTTOM_CENTER"),g.load(),g.show(),interstitial=f.createInterstitial(),/Android/i.test(navigator.userAgent)&&(Cocoon.Social.GooglePlayGames.init({}),v=Cocoon.Social.GooglePlayGames.getSocialInterface(),u="Play Games."),/iPhone|iPad|iPod/i.test(navigator.userAgent)&&(Cocoon.Social.GameCenter.init({}),v=Cocoon.Social.GameCenter.getSocialInterface(),u="Game Center."),v.login(),v.submitScore(q,function(e){e&&console.error("submitScore error: "+e.message)},{leaderboardID:"CgkImrjO8Y8JEAIQAA"}),c()}var u,f,g,d,m,y,v,w,x,A,p=document.getElementById("canvas"),I=p.getContext("2d"),S=[],Y="start",T=!1,k="#000000",C=(localStorage.getItem("firstTimee")||!0,0),X=!1,E=!1,L=["#87ceeb","#8F9BFE","#DD5F4D","#EB899E","#9eeb89"],P=1,F=0,z=985,M=0,O=localStorage.getItem("first")||!1,Q=localStorage.getItem("second")||!1,R=localStorage.getItem("third")||!1,B=localStorage.getItem("fourth")||!1,j=localStorage.getItem("fifth")||!1,J=localStorage.getItem("sixth")||!1,G=localStorage.getItem("seventh")||!1,D=localStorage.getItem("eighth")||!1,N=0,H=N.toString(),q=localStorage.getItem("hardHighScoree")||0,W=window.innerWidth,_=window.innerHeight;p.width=W,p.height=_,A=W*_/382010.666667,I.fillStyle="#87ceeb",I.fillRect(0,0,W,_);var K=new Audio("select.wav"),U=new Audio("Explosion2.wav"),V=new Audio("shoot.wav"),Z=new Audio("laser.wav"),$=new Audio("loss.wav"),ee=function(){this.x=oe.x,this.y=oe.y,this.size=W/41,this.colour=oe.colour,this.velX=0,this.velY=0,this.isActive=!0,this.rect={x:this.x-W/41,y:this.y-W/41,width:2*this.size,height:2*this.size},this.render=function(e){e.fillStyle=this.colour,e.beginPath(),e.arc(this.x,this.y,this.size,0,2*Math.PI),e.fill()},this.update=function(){this.x+=this.velX,this.y+=this.velY,this.rect={x:this.x-W/41,y:this.y-W/41,width:2*this.size,height:2*this.size}}},te=function(e,t,i,o,l){this.x=e,this.y=t,this.size=i,this.rgbCol="rgba(0,0,0,0.15)",this.velX=o,this.velY=l,this.rect={x:this.x-this.size/2,y:this.y-this.size/2,width:this.size,height:this.size},this.render=function(e){e.fillStyle=this.rgbCol,e.beginPath(),e.arc(this.x,this.y,this.size/2,0,2*Math.PI),e.fill()},this.update=function(){this.x+=this.velX,this.y+=this.velY,(this.x<=0||this.x>=W)&&(this.velX*=-1),(this.y<=0||this.y>=_)&&(this.velY*=-1)}},ie=[],oe={x:W/2,y:_/2,size:W/2/7.6875,bullets:[],state:"black",colour:"#000000",rgbCol:"rgba(0,0,0)",isActive:!0,rect:{x:W/2-W/2/7.6875,y:_/2-W/2/7.6875,width:W/2/3.84375,height:W/2/3.84375},render:function(e){e.fillStyle=this.rgbCol,e.beginPath(),e.arc(this.x,this.y,this.size/2,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(this.x,this.y,this.size,0,2*Math.PI),e.fill()},update:function(){"black"==this.state?(this.colour="#000000",this.rgbCol="rgba(0,0,0,0.5)"):"white"==this.state&&(this.colour="#ffffff",this.rgbCol="rgba(255,255,255,0.5)")},switchColour:function(){"black"==this.state?this.state="white":"white"==this.state&&(this.state="black")}},le=[{id:"tl",x:0,y:0},{id:"tr",x:W-W/15.375,y:0},{id:"bl",x:0,y:_-W/15.125},{id:"br",x:W-W/15.125,y:_-W/15.125}],se=function(e,t,i,o){this.x=e,this.y=t,this.originX=e,this.originY=t,this.width=i,this.height=o,this.isActive=!1,this.state,this.colour,this.rgbCol,this.spawnPoint,this.render=function(e){"white"===this.state&&(this.colour="#ffffff",this.rgbCol="rgba(255,255,255,0.7)"),"black"===this.state&&(this.colour="#000000",this.rgbCol="rgba(0,0,0,0.7)"),e.fillStyle=this.rgbCol,e.fillRect(this.x,this.y,this.width,this.height)},this.update=function(){0===this.spawnPoint&&(this.x<oe.x-W/15.125&&(this.x+=A),this.y<oe.y-W/15.125&&(this.y+=A)),1===this.spawnPoint&&(this.x>oe.x&&(this.x-=A),this.y<oe.y-W/15.125&&(this.y+=A)),2===this.spawnPoint&&(this.x<oe.x-W/15.125&&(this.x+=A),this.y>oe.y&&(this.y-=A)),3===this.spawnPoint&&(this.x>oe.x&&(this.x-=A),this.y>oe.y&&(this.y-=A))}};p.addEventListener("touchstart",l,!1),p.addEventListener("touchend",s,!1),window.addEventListener("offline",function(e){E=!1},!1),window.addEventListener("online",function(e){E=!0},!1);var re,ne,ae=30,ce=Date.now(),he=1e3/ae;window.cordova?document.addEventListener("deviceready",h):window.onload=h}();