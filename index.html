<!DOCTYPE html>
<!-- saved from url=(0067)file:///C:/Users/kwaku/Desktop/kw4ks.com/games/ldshooter/index.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
            <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=0.325">
    <style>
        #canvas{
            border : 1px solid #000;
            width : 100%;
            height : 100%;
        }

        @font-face {
            font-family: 'Lato';
            src: url('lato.ttf');
        };
        
        
    </style></head>
    
    

    <body>
    
        <canvas id="canvas" width="320" height="568">Your browser does not support HTML5. Please update.</canvas>
        
        <script>
            var canvas = document.getElementById('canvas'),
                ctx = canvas.getContext('2d'),
                entities = [],
                enemyList = [],
                touched = false,
                gameState = 'start',
                score = 0,
                highScore = localStorage.getItem('highScore') || 0,
                WIDTH = window.innerWidth,
                HEIGHT = window.innerHeight;
            
            var Bullet = function(){
                this.x = player.x;
                this.y = player.y;
                this.size = (WIDTH / 41);
                this.colour = player.colour;
                this.velX = 0;
                this.velY = 0;
                this.isActive = true;
                this.rect = {x : (this.x - (WIDTH / 41)), y : (this.y - (WIDTH / 41)), width : (this.size * 2), height : (this.size * 2)};
                
                this.render = function(context){
                    context.fillStyle = this.colour;
                    
                    context.beginPath();
                    context.arc(this.x,this.y,this.size,0,2*Math.PI);
                    context.fill();
                };
                
                this.update = function(){
                    this.x += this.velX;
                    this.y += this.velY;
                    this.rect = {x : (this.x - (WIDTH / 41)), y : (this.y - (WIDTH / 41)), width : (this.size * 2), height : (this.size * 2)};
                };
            };
            
            var player = {
                x : (WIDTH / 2),
                y : (HEIGHT / 2),
                size : ((WIDTH / 2) / 7.6875),
                bullets : [],
                colour : '#000000',
                isActive : true,
                rect : {x : ((WIDTH / 2) - ((WIDTH / 2) / 7.6875)), y : ((HEIGHT / 2) - ((WIDTH / 2) / 7.6875)), width : ((WIDTH / 2) / 3.84375), height: ((WIDTH / 2) / 3.84375)},
                
                render : function(context){
                    context.strokeStyle = this.colour;
                    
                    context.beginPath();
                    context.arc(this.x,this.y,this.size,0,2*Math.PI);
                    ctx.lineWidth = ((WIDTH * HEIGHT) / 491156.571);
                    context.stroke();
                },
                
                update : function(){
                    if(colourChangeBTN.state === 'black'){
                        this.colour = '#000000';
                    }
                    
                    else if(colourChangeBTN.state === 'white'){
                        this.colour = '#ffffff';
                    }
                    
                }
            };
            
            entities.push(player);
            
            var colourChangeBTN = {
                x : ((WIDTH / 2) - ((WIDTH / 2) / 5.125)),
                y : (HEIGHT - (WIDTH / 5.125)),
                width : (WIDTH / 5.125),
                height : (WIDTH / 5.125),
                state : 'black',
                colour : '#000000',
                isActive : true,
                
                render : function(context){
                    context.fillStyle = this.colour;
                    context.fillRect(this.x, this.y, this.width, this.height);
                },
                
                update : function(){
                    if(this.state === 'black'){
                        this.colour = '#000000';
                
                    }
                    
                    else if(this.state === 'white'){
                        this.colour = '#ffffff';
                    };
                }
            };
            
            entities.push(colourChangeBTN);
            
            var spawnPoints = [
                {x : 0, y : 0},
                {x : (WIDTH - (WIDTH / 15.375)), y : 0},
                {x : 0, y : (HEIGHT - (WIDTH / 15.125))},
                {x : (WIDTH - (WIDTH / 15.125)), y : (HEIGHT - (WIDTH / 15.125))}
            ];
            
            var Enemy = function(x, y, w, h){
                this.x = x;
                this.y = y;
                this.width = w;
                this.height = h;
                this.isActive = false;
                this.state;
                this.colour;
                this.spawnPoint;
                
                this.render = function(context){
                    if(this.state === 'white'){
                        this.colour = '#ffffff';
                    }
                    
                    if(this.state === 'black'){
                        this.colour = '#000000';
                    }
                    
                    context.strokeStyle = this.colour;
                    context.lineWidth = ((WIDTH * HEIGHT) / 491156.571);
                    context.strokeRect(this.x, this.y, this.width, this.height);
                };
                
                this.update = function(){
                    if(this.spawnPoint === 0){
                        if(this.x < player.x - (WIDTH / 15.125)){
                            this.x += ((WIDTH * HEIGHT) / 491156.571);
                        }
                        if(this.y < player.y - (WIDTH / 15.125)){
                            this.y += 3.5;
                        }
                    }
                    
                    if(this.spawnPoint === 1){
                        if(this.x > player.x){
                            this.x -= ((WIDTH * HEIGHT) / 491156.571);
                        }
                        if(this.y < player.y - (WIDTH / 15.125)){
                            this.y += ((WIDTH * HEIGHT) / 491156.571);
                        };
                    }
                    
                    if(this.spawnPoint === 2){
                        if(this.x < player.x - (WIDTH / 15.125)){
                            this.x += ((WIDTH * HEIGHT) / 491156.571);
                        }
                        if(this.y > player.y){
                            this.y -= ((WIDTH * HEIGHT) / 491156.571);  
                        };
                    }
                    
                    if(this.spawnPoint === 3){
                        if(this.x > player.x){
                            this.x -= ((WIDTH * HEIGHT) / 491156.571);
                        }
                        if(this.y > player.y){
                            this.y -= ((WIDTH * HEIGHT) / 491156.571);
                        }
                    };
                }
            };
            
            canvas.width = WIDTH;
            canvas.height = HEIGHT;

            console.log(WIDTH);
            console.log(HEIGHT);
            
            function randNum(upperBound){
                return Math.floor(Math.random() * upperBound);
            };
            
            function AABBCollision(shapeA, shapeB){
                if(shapeA.x + shapeA.width > shapeB.x &&
                  shapeA.x < shapeB.x + shapeB.width &&
                  shapeA.y + shapeA.height > shapeB.y &&
                  shapeA.y < shapeB.y + shapeB.height){
                    return true;
                }
            };
            
            canvas.addEventListener('touchstart', touchHandler, false);
            
            function touchHandler(event){
                touchX = event.targetTouches[0].clientX;
                touchY = event.targetTouches[0].clientY;
                
                if(gameState === 'start'){
                    if(touchX > ((WIDTH / 2) - ((WIDTH / 2) / 3.06722689)) &&
                      touchX < ((WIDTH / 2) + ((WIDTH / 2) / 3.06722689)) &&
                      touchY > ((HEIGHT / 2) - ((WIDTH / 2) / 2.5625)) &&
                      touchY < ((HEIGHT / 2) - ((WIDTH / 2) / 7.6875))){
                        gameState = 'play';
                    }
                }
                
                else if(gameState === 'play'){
                    if(touchX > colourChangeBTN.x &&
                      touchX < (colourChangeBTN.x + colourChangeBTN.width) &&
                      touchY > colourChangeBTN.y &&
                      touchY < colourChangeBTN.y + colourChangeBTN.height){
                        if(colourChangeBTN.state === 'black'){
                            colourChangeBTN.state = 'white';
                        }

                        else if(colourChangeBTN.state === 'white'){
                          colourChangeBTN.state = 'black';
                        };
                    }

                    else{

                        b = new Bullet()
                        directionX = (touchX - player.x);
                        directionY = (touchY - player.y);

                        angle = Math.atan2(directionY, directionX);
                        b.velX = Math.cos(angle) * ((WIDTH * HEIGHT) / 49115.6571);
                        b.velY = Math.sin(angle) * ((WIDTH * HEIGHT) / 49115.6571);

                        player.bullets.push(b);
                        entities.push(b);
                    };
                }
            };

            function render(){
                ctx.clearRect(0, 0, WIDTH, HEIGHT);
                ctx.fillStyle = '#c6cccc';
                ctx.fillRect(0, 0, WIDTH, HEIGHT)
                
                if(gameState === 'start'){   
                    ctx.font = '128px lato';
                    ctx.fillStyle = '#000000'
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText('PLAY', (WIDTH / 2), ((HEIGHT / 2) - ((HEIGHT / 2)/ 6.82421875)));
                    ctx.fillText('HELP', (WIDTH / 2), ((HEIGHT / 2) + ((HEIGHT / 2)/ 6.82421875)));

                    ctx.font = '160px lato';
                    ctx.fillText('POLA', ((WIDTH / 2) - ((WIDTH / 2) / 3.075)), ((WIDTH / 2) / 1.375));

                    ctx.fillStyle = '#FFFFFF';
                    ctx.fillText('RITY', ((WIDTH / 2) + ((WIDTH / 2) / 2.34285714)), ((WIDTH / 2) / 1.375));
                }
                
                if(gameState === 'play'){

                    ctx.fillRect(0, 0, WIDTH, HEIGHT);

                    for(var i = 0; i < entities.length; i++){
                        if(entities[i].isActive){
                            entities[i].render(ctx);
                        }
                    };

                    ctx.fillStyle = (score % 2 === 0) ? '#000000' : '#FFFFFF';

                    ctx.fillText(score, (WIDTH / 2), ((WIDTH / 4) / 3.075));
                }

                if(gameState === 'dead'){
                    ctx.font = '128px lato'
                    ctx.fillStyle = 'black';
                    ctx.fillText('You got ' + score + '.', (WIDTH / 2), (WIDTH / 3.075));

                    if(score > highScore){
                        ctx.fillText('Congratulations!', (WIDTH / 2), ((HEIGHT / 2) - ((WIDTH / 8) / 3.075)));
                        ctx.font = '90px lato'
                        ctx.fillText('You beat your high score.', (WIDTH / 2), ((HEIGHT / 2) + ((WIDTH / 8) / 2.075)));
                        localStorage.setItem('highScore', score);
                    }

                    ctx.fillText('Your high score is ' + highScore + '.', (WIDTH / 2), ((WIDTH / 2) / 3.075));

                    ctx.font = '160px lato';
                    ctx.fillText('PLAY AGAIN', (WIDTH / 2), ((HEIGHT / 2) + ((HEIGHT / 2) / 2.09975962)));
                };
            };
            
            function update(){
                if(gameState === 'play'){
                    shouldSpawn = randNum(1000);

                    if(shouldSpawn > 980){
                        colour = randNum(2);
                        spawnPointNum = randNum(4);
                        colourList = ['white', 'black'];

                        newEnemy = new Enemy(spawnPoints[spawnPointNum].x, spawnPoints[spawnPointNum].y, (WIDTH / 15.375), (WIDTH / 15.375));
                        newEnemy.state = colourList[colour];
                        newEnemy.isActive = true;
                        newEnemy.spawnPoint = spawnPointNum;

                        enemyList.push(newEnemy);
                        entities.push(newEnemy);

                    }

                    for(var i = 0; i < entities.length; i++){
                        if(entities[i].isActive){
                            entities[i].update();
                        }
                    };

                    for(var i = 0; i < player.bullets.length; i++){
                        for(var j = 0; j < enemyList.length; j++){
                            if(AABBCollision(player.bullets[i].rect, enemyList[j])){
                                if(player.bullets[i].isActive && enemyList[j].isActive){
                                    if(player.bullets[i].colour === enemyList[j].colour){
                                        player.bullets[i].isActive = false;
                                        enemyList[j].isActive = false;
                                        score += 1;
                                    };
                                };
                            };
                        };
                    };

                    for(var i = 0; i < enemyList.length; i++){
                        if(AABBCollision(player.rect, enemyList[i])){
                            gameState = 'dead';
                        };
                    };
                }
            };
                   
            function main(){
                render();
                update();
                window.requestAnimationFrame(main);
            };
            
            main();
            
                
        </script>
        
    

</body></html>